!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three"),require("three/examples/jsm/renderers/CSS3DRenderer")):"function"==typeof define&&define.amd?define(["exports","three","three/examples/jsm/renderers/CSS3DRenderer"],e):e((t=t||self).THREEGraduatedAxes={},t.THREE,t.THREE)}(this,function(t,e,i){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return(o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},s=function(){function t(t){var e=t.orientation,i=t.spacing,r=t.size,n=void 0===r?10:r,o=t.labels,s=void 0===o?[]:o,a=t.prefix,l=void 0===a?"":a,c=t.suffix,u=void 0===c?"":c,h=t.decimals,p=void 0===h?void 0:h,f=t.graduations,d=void 0===f?1:f,y=t.root,v=void 0!==y&&y,g=t.relative,m=void 0!==g&&g,b=t.lineWidth,x=void 0===b?.02:b,z=t.progress,O=void 0===z?1:z,M=t.margin,P=void 0===M?.2:M,w=t.padding,S=void 0===w?0:w;this.startOffset=0,this.endOffset=0,this.orientation=e,this.spacing=i,this.size=n,this._labels=s,this.prefix=l,this.suffix=u,this.decimals=p,this.graduations=d,this.root=v,this.relative=m,this.lineWidth=x,this.progress=O,this.margin=P,this.padding=S}return t.prototype.isPrime=function(t){for(var e=2,i=Math.sqrt(t);e<=i;e++)if(t%e==0)return!1;return t>1},t.prototype.updateRootPosition=function(){if(this.relative)if(this.labels.length){var t=this.labels.findIndex(function(t){return 0===parseFloat(t)});this.rootPosition=-1===t?0:t/(this.labels.length-1)}else this.rootPosition=.5;else this.rootPosition=0},Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relative",{get:function(){return this._relative},set:function(t){this._relative=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),t.prototype.generate=function(t,e){var i=void 0===e?{}:e,r=i.targetDensity,n=void 0===r?4:r,o=i.minimumDelta,s=void 0===o?1:o,a=i.rounding,l=void 0===a?2:a,c=i.avoidPrime,u=void 0===c||c,h=i.includeZero,p=void 0!==h&&h,f=i.autoRelative,d=void 0===f||f;i.symmetric;this.reset();var y,v=t[0],g=1/0,m=-1/0,b=1/0,x=0,z=function(t){return t};t.forEach(function(t){t<g&&(g=t),t>m&&(m=t);var e=Math.abs(t-v);e&&e<b&&(b=e)}),d&&(this.relative=g<0&&m>0);var O=m-g;if(b=Math.max(s,b),(b*=O/b/n)>=O/2&&(b=O/2),l){var M=Math.pow(10,l);b=(z=function(t){return Math.round(t*M)/M})(b);var P=Math.floor(g*M)/M;x+=g-P,g=P,O+=x}var w=O/b+1,S=Math.ceil(w);if(u)for(;this.isPrime(S+1);)S++;if(m+=y=(S-w)*b||0,O+=y,p||d&&this.relative){for(var j=1/0,E=0;j&&E<S;E++){var _=g+E*b;Math.abs(_)<Math.abs(j)&&(j=_)}j<0&&(j+=b),g-=j,x+=j,O+=j}var R=[];for(E=0;E<S;E++)R.push(z(g+E*b));this.startOffset=x/O,this.endOffset=y/O,this.labels=R},t.prototype.reset=function(){this.startOffset=this.endOffset=0,this.labels.splice(0),this.root=!1,this.relative=!1},t}(),a=function(t){function e(){var e=t.call(this,document.createElement("div"))||this;return e.wrapper=document.createElement("div"),e.content=document.createElement("div"),e.wrapper.appendChild(e.content),e.element.appendChild(e.wrapper),e}return n(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this.wrapper.style},enumerable:!0,configurable:!0}),e.prototype.generate=function(t,e){var i=void 0!==t.decimals&&Math.pow(10,t.decimals);this.content.textContent=""+t.prefix+(i?Math.round(e*i)/i:e)+t.suffix},e.prototype.resize=function(t,e,i,r){void 0===r&&(r=10);var n=!!e.rootPosition,o=(e.rootPosition-.5)*e.size;i=(i/(t.labels.length-1)-.5)*t.size;var s=t.spacing.x*(n||!t.orientation.x),a=t.spacing.y*(n||!t.orientation.y);this.content.style.transform="translate("+50*s+"%, "+-50*a+"%)",this.position.setX(r*(t.orientation.x*i+t.orientation.y*o+t.margin*s-t.padding*t.orientation.y*(1-n))).setY(r*(t.orientation.y*i+t.orientation.x*o+t.margin*a-t.padding*t.orientation.x*(1-n)))},e}(i.CSS3DObject),l=function(t){function r(r){var n=void 0===r?{}:r,o=n.opacity,s=void 0===o?1:o,a=n.color,l=void 0===a?"#aaaaaa":a,c=n.fontSize,u=void 0===c?.3:c,h=n.fontFamily,p=void 0===h?"sans-serif":h,f=n.faceCamera,d=void 0!==f&&f,y=n.renderingScale,v=void 0===y?100:y,g=t.call(this)||this;return g.css3DRenderer=new i.CSS3DRenderer,g.style=g.css3DRenderer.domElement.style,g.originalMatrix=new e.Matrix4,g.opacity=s,g.color=l,g.fontSize=u,g.fontFamily=p,g.faceCamera=d,g.renderingScale=v,g.matrixAutoUpdate=!1,g.style.position="absolute",g.style.pointerEvents="none",g.style.top=g.style.left="0",g.style.zIndex="2",document.body.appendChild(g.css3DRenderer.domElement),g}return n(r,t),r.prototype.iterate=function(t,e,i){return[t,e].reduce(function(t,e,r,n){return e.labels.reduce(function(t,o,s){return i(e,n[(r+1)%n.length],t,s,o),t+1},t)},0)},r.prototype.scaleFont=function(){this.style.fontSize=this.fontSize*this.renderingScale+"px"},Object.defineProperty(r.prototype,"opacity",{get:function(){return parseFloat(this.style.opacity)},set:function(t){this.style.opacity=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){return this.style.color},set:function(t){this.style.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this.style.fontFamily},set:function(t){this.style.fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"faceCamera",{get:function(){return this._faceCamera},set:function(t){this._faceCamera=t,t||this.children.forEach(function(t){return t.rotation.set(0,0,0)})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return!this.style||"none"!==this.style.display},set:function(t){this.style&&(this.style.visibility=t?null:"none")},enumerable:!0,configurable:!0}),r.prototype.setRendererSize=function(t,e){this.css3DRenderer.setSize(t,e)},r.prototype.render=function(t){var e=this.parent,i=t.position.x,r=t.position.y,n=t.position.z;this.originalMatrix.copy(this.matrix),this.parent=null,t.position.multiplyScalar(this.renderingScale),this.updateWorldMatrix(!0,!1),e.updateWorldMatrix(!0,!1),this.applyMatrix(e.matrixWorld),this.updateWorldMatrix(!1,!1),this.faceCamera&&this.children.forEach(function(e){e.lookAt(t.position)}),this.position.multiplyScalar(this.renderingScale),this.updateMatrix(),this.updateMatrixWorld(!0),this.css3DRenderer.render(this,t),t.position.set(i,r,n),this.parent=e,this.matrix.copy(this.originalMatrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},r.prototype.generate=function(t,e){var i=this;this.scaleFont(),this.children.slice(this.iterate(t,e,function(t,e,r,n,o){var s=i.children[r];s||i.add(s=new a),s.generate(t,o),s.resize(t,e,n,i.renderingScale)})).forEach(function(t){return i.remove(t)})},r.prototype.resize=function(t,e){var i=this;this.scaleFont(),this.iterate(t,e,function(t,e,r,n){var o=i.children[r];o&&o.resize(t,e,n,i.renderingScale)})},r}(e.Object3D),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.graduations=[],i.container=new e.Box2(new e.Vector2,new e.Vector2),i}return n(i,t),i.prototype.generate=function(t,i){for(var r=this,n=6*[t,i].reduce(function(t,e,i){var n=e.graduations,o=e.root,s=e.rootPosition,a=e.labels,l=a.length-1;if(n)if(a.length)if(n<1){s*=l;for(var c=Math.min(l,Math.round(1/n));l%c||s%c;)c--;n=Math.ceil(a.length/c)}else n=Math.round(n)*l+1;else n=Math.round(n);else n=0+o;return r.graduations[i]=n,t+n},0),o=new Uint16Array(n),s=0,a=0;a<n;a+=6)o[a]=o[a+3]=s,o[a+1]=o[a+5]=s+2,o[a+2]=s+1,o[a+4]=s+3,s+=4;this.setIndex(new e.BufferAttribute(o,1)),this.setAttribute("position",new e.BufferAttribute(new Float32Array(2*n),3)),this.resize(t,i)},i.prototype.resize=function(t,e){for(var i=this.getAttribute("position"),r=i.array,n=this.graduations[0],o=this.graduations[1],s=t.size/2,a=e.size/2,l=t.size/Math.max(1,n-1),c=e.size/Math.max(1,o-1),u=s+e.padding,h=a+t.padding,p=t.lineWidth/2,f=e.lineWidth/2,d=1===n?t.rootPosition*t.size:0,y=1===o?e.rootPosition*e.size:0,v=2*t.progress,g=2*e.progress,m=0,b=0;b<n;b++){var x=b*l-s+d;r[m]=r[m+9]=x-p,r[m+3]=r[m+6]=x+p,r[m+7]=r[m+10]=-h,r[m+1]=r[m+4]=h*v-h,m+=12}for(b=0;b<o;b++){x=b*c-a+y;r[m+7]=r[m+10]=x-f,r[m+1]=r[m+4]=x+f,r[m]=r[m+9]=-u,r[m+3]=r[m+6]=u*g-u,m+=12}i.needsUpdate=!0,this.container.min.set(t.startOffset*t.size-s,e.startOffset*e.size-a),this.container.max.set(s-t.endOffset*t.size,a-e.endOffset*e.size)},i}(e.BufferGeometry),u=function(t){function i(i){var r=void 0===i?{}:i,n=r.x,a=void 0===n?{}:n,u=r.y,h=void 0===u?{}:u,p=r.labels,f=void 0===p?{}:p,d=r.opacity,y=void 0===d?1:d,v=r.color,g=void 0===v?11184810:v,m=r.generate,b=void 0===m||m,x=t.call(this,new c)||this;return x.x=new s(o({},a,{orientation:new e.Vector2(1,0),spacing:new e.Vector2(1,-1)})),x.y=new s(o({},h,{orientation:new e.Vector2(0,1),spacing:new e.Vector2(-1,1)})),x.graduations=x.geometry,x.labels=new l(f),x.opacity=y,x.color.set(g),x.add(x.labels),b&&x.generate(),x}return n(i,t),Object.defineProperty(i.prototype,"visible",{get:function(){return this.labels.visible},set:function(t){this.labels&&(this.labels.visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.material.color},set:function(t){this.material.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opacity",{get:function(){return this.material.opacity},set:function(t){this.material.transparent=1!==t,this.material.opacity=t},enumerable:!0,configurable:!0}),i.prototype.generate=function(t,e){var i=void 0===e?{}:e,r=i.x,n=void 0===r?{}:r,o=i.y,s=void 0===o?{}:o;t&&(this.x.generate(t.map(function(t){return t.x}),n),this.y.generate(t.map(function(t){return t.y}),s)),this.generateGraduations(),this.generateLabels()},i.prototype.resize=function(){this.resizeGraduations(),this.resizeLabels()},i.prototype.generateGraduations=function(){this.graduations.generate(this.x,this.y)},i.prototype.resizeGraduations=function(){this.graduations.resize(this.x,this.y)},i.prototype.generateLabels=function(){this.labels.generate(this.x,this.y)},i.prototype.resizeLabels=function(){this.labels.resize(this.x,this.y)},i.prototype.interpolateValue=function(t,e,i,r){return(t-e)/(i-e)*(this.graduations.container.max[r]-this.graduations.container.min[r])+this.graduations.container.min[r]},i.prototype.interpolate=function(t,i){var r=this;for(void 0===i&&(i=[]),i.length>t.length&&i.splice(t.length);i.length<t.length;)i.push(new e.Vector2);var n=1/0,o=1/0,s=-1/0,a=-1/0;return t.forEach(function(t){var e=t.x,i=t.y;e<n&&(n=e),e>s&&(s=e),i<o&&(o=i),i>a&&(a=i)}),t.forEach(function(t,e){var l=t.x,c=t.y;return i[e].set(r.interpolateValue(l,n,s,"x"),r.interpolateValue(c,o,a,"y"))}),i},i}(e.Mesh);t.Axes=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
