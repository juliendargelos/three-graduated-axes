!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three"),require("three/examples/jsm/renderers/CSS3DRenderer")):"function"==typeof define&&define.amd?define(["exports","three","three/examples/jsm/renderers/CSS3DRenderer"],e):e((t=t||self).THREEGraduatedAxes={},t.THREE,t.THREE)}(this,function(t,e,i){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function r(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return(o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=function(){function t(t){var e=t.orientation,i=t.spacing,n=t.size,r=void 0===n?10:n,o=t.labels,s=void 0===o?[]:o,a=t.prefix,c=void 0===a?"":a,l=t.suffix,u=void 0===l?"":l,f=t.decimals,p=void 0===f?void 0:f,h=t.graduations,d=void 0===h?1:h,y=t.root,v=void 0!==y&&y,g=t.relative,b=void 0!==g&&g,m=t.lineWidth,x=void 0===m?.02:m,z=t.margin,w=void 0===z?.2:z,S=t.padding,O=void 0===S?0:S;this.startOffset=0,this.endOffset=0,this.orientation=e,this.spacing=i,this.size=r,this._labels=s,this.prefix=c,this.suffix=u,this.decimals=p,this.graduations=d,this.root=v,this.relative=b,this.lineWidth=x,this.margin=w,this.padding=O}return t.prototype.isPrime=function(t){for(var e=2,i=Math.sqrt(t);e<=i;e++)if(t%e==0)return!1;return t>1},t.prototype.updateRootPosition=function(){if(this.relative)if(this.labels.length){var t=this.labels.findIndex(function(t){return 0===parseFloat(t)});this.rootPosition=-1===t?0:t/(this.labels.length-1)}else this.rootPosition=.5;else this.rootPosition=0},Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relative",{get:function(){return this._relative},set:function(t){this._relative=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),t.prototype.generate=function(t,e){var i=void 0===e?{}:e,n=i.targetDensity,r=void 0===n?4:n,o=i.minimumDelta,s=void 0===o?1:o,a=i.rounding,c=void 0===a?2:a,l=i.avoidPrime,u=void 0===l||l,f=i.includeZero,p=void 0!==f&&f,h=i.autoRelative,d=void 0===h||h;i.symmetric;this.reset();var y,v=t[0],g=1/0,b=-1/0,m=1/0,x=0,z=function(t){return t};t.forEach(function(t){t<g&&(g=t),t>b&&(b=t);var e=Math.abs(t-v);e&&e<m&&(m=e)}),d&&(this.relative=g<0&&b>0);var w=b-g;if(m=Math.max(s,m),(m*=w/m/r)>=w/2&&(m=w/2),c){var S=Math.pow(10,c);m=(z=function(t){return Math.round(t*S)/S})(m);var O=Math.floor(g*S)/S;x+=g-O,g=O,w+=x}var P=w/m+1,E=Math.ceil(P);if(u)for(;this.isPrime(E+1);)E++;if(b+=y=(E-P)*m||0,w+=y,p||d&&this.relative){for(var M=1/0,j=0;M&&j<E;j++){var C=g+j*m;Math.abs(C)<Math.abs(M)&&(M=C)}M<0&&(M+=m),g-=M,x+=M,w+=M}var R=[];for(j=0;j<E;j++)R.push(z(g+j*m));this.startOffset=x/w,this.endOffset=y/w,this.labels=R},t.prototype.reset=function(){this.startOffset=this.endOffset=0,this.labels.splice(0),this.graduations=1,this.root=!1,this.relative=!1},t}(),a=function(){function t(){this.id=Date.now()+"-"+~~(1e3*Math.random())}return t.prototype.property=function(t){return"--"+t+"-"+this.id},t.prototype.get=function(t){return document.body.style.getPropertyValue(this.property(t))},t.prototype.set=function(t,e){return document.body.style.setProperty(this.property(t),e),this},t.prototype.bind=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){t.setProperty(i,"var("+e.property(i)+")")})},t}(),c=function(t){function e(){var e=t.call(this,document.createElement("div"))||this;return e.wrapper=document.createElement("div"),e.content=document.createElement("div"),e.wrapper.appendChild(e.content),e.element.appendChild(e.wrapper),e}return r(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this.wrapper.style},enumerable:!0,configurable:!0}),e.prototype.generate=function(t,e){var i=void 0!==t.decimals&&Math.pow(10,t.decimals);this.content.textContent=""+t.prefix+(i?Math.round(e*i)/i:e)+t.suffix},e.prototype.resize=function(t,e,i){var n=(e.rootPosition-.5)*e.size;i=(i/(t.labels.length-1)-.5)*t.size;var r=t.spacing.x*(e.relative||!t.orientation.x),o=t.spacing.y*(e.relative||!t.orientation.y);this.content.style.transform="translate("+50*r+"%, "+-50*o+"%)",this.position.setX(t.orientation.x*i+t.orientation.y*n+t.margin*r-t.padding*t.orientation.y*!e.relative).setY(t.orientation.y*i+t.orientation.x*n+t.margin*o-t.padding*t.orientation.x*!e.relative)},e}(i.CSS3DObject),l=function(t){function e(e){var i=void 0===e?{}:e,n=i.opacity,r=void 0===n?1:n,o=i.color,s=void 0===o?"#aaaaaa":o,c=i.fontSize,l=void 0===c?.1:c,u=i.fontFamily,f=void 0===u?"sans-serif":u,p=i.faceCamera,h=void 0!==p&&p,d=t.call(this)||this;return d.cssStyle=(new a).set("white-space","nowrap"),d.onBeforeRender=function(t,e,i){d.faceCamera&&d.children.forEach(function(t){t.lookAt(i.position)})},d.opacity=r,d.color=s,d.fontSize=l,d.fontFamily=f,d.faceCamera=h,d}return r(e,t),e.prototype.iterate=function(t,e,i){return[t,e].reduce(function(t,e,n,r){return e.labels.reduce(function(t,o,s){return i(e,r[(n+1)%r.length],t,s,o),t+1},t)},0)},e.prototype.addLabel=function(){var t=new c;return this.cssStyle.bind(t.style,"opacity","color","visibility","white-space","transform","font-size","font-family"),this.add(t),t},Object.defineProperty(e.prototype,"opacity",{get:function(){return parseFloat(this.cssStyle.get("opacity"))},set:function(t){this.cssStyle.set("opacity",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.cssStyle.get("color")},set:function(t){this.cssStyle.set("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.cssStyle.get("font-family")},set:function(t){this.cssStyle.set("font-family",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return Math.sqrt(parseFloat(this.cssStyle.get("font-size"))/2)},set:function(t){this.cssStyle.set("font-size",t*t*2+"px").set("transform","scale("+Math.sqrt(t)/10+")")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceCamera",{get:function(){return this._faceCamera},set:function(t){this._faceCamera=t,t||this.children.forEach(function(t){return t.rotation.set(0,0,0)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.cssStyle&&"hidden"!==this.cssStyle.get("visibility")},set:function(t){this.cssStyle&&this.cssStyle.set("visibility",t?"visible":"hidden")},enumerable:!0,configurable:!0}),e.prototype.generate=function(t,e){var i=this;this.children.slice(this.iterate(t,e,function(t,e,n,r,o){var s=i.children[n]||i.addLabel();s.generate(t,o),s.resize(t,e,r)})).forEach(function(t){return i.remove(t)})},e.prototype.resize=function(t,e){var i=this;this.iterate(t,e,function(t,e,n,r){var o=i.children[n];o&&o.resize(t,e,r)})},e}(e.Object3D),u=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.graduations=[],i.container=new e.Box2(new e.Vector2,new e.Vector2),i}return r(i,t),i.prototype.generate=function(t,i){for(var n=this,r=6*[t,i].reduce(function(t,e,i){var r=e.graduations,o=e.root,s=e.rootPosition,a=e.labels,c=a.length-1;if(r)if(a.length)if(r<1){s*=c;for(var l=Math.min(c,Math.round(1/r));c%l||s%l;)l--;r=Math.ceil(a.length/l)}else r=Math.round(r)*c+1;else r=Math.round(r);else r=0+o;return n.graduations[i]=r,t+r},0),o=new Uint16Array(r),s=0,a=0;a<r;a+=6)o[a]=o[a+3]=s,o[a+1]=o[a+5]=s+2,o[a+2]=s+1,o[a+4]=s+3,s+=4;this.setIndex(new e.BufferAttribute(o,1)),this.setAttribute("position",new e.BufferAttribute(new Float32Array(2*r),3)),this.resize(t,i)},i.prototype.resize=function(t,e){for(var i=this.getAttribute("position"),n=i.array,r=this.graduations[0],o=this.graduations[1],s=t.size/2,a=e.size/2,c=t.size/Math.max(1,r-1),l=e.size/Math.max(1,o-1),u=s+e.padding,f=a+t.padding,p=t.lineWidth/2,h=e.lineWidth/2,d=1===r?t.rootPosition*t.size:0,y=1===o?e.rootPosition*e.size:0,v=0,g=0;g<r;g++){var b=g*c-s+d;n[v]=n[v+9]=b-p,n[v+3]=n[v+6]=b+p,n[v+7]=n[v+10]=-f,n[v+1]=n[v+4]=f,v+=12}for(g=0;g<o;g++){b=g*l-a+y;n[v]=n[v+9]=-u,n[v+3]=n[v+6]=u,n[v+7]=n[v+10]=b-h,n[v+1]=n[v+4]=b+h,v+=12}i.needsUpdate=!0,this.container.min.set(t.startOffset*t.size-s,e.startOffset*e.size-a),this.container.max.set(s-t.endOffset*t.size,a-e.endOffset*e.size)},i}(e.BufferGeometry),f=function(t){function n(i){var n=void 0===i?{}:i,r=n.x,a=void 0===r?{}:r,c=n.y,f=void 0===c?{}:c,p=n.labels,h=void 0===p?{}:p,d=n.opacity,y=void 0===d?1:d,v=n.color,g=void 0===v?11184810:v,b=n.autoRenderCSS3D,m=void 0===b||b,x=t.call(this,new u)||this;return x.onBeforeRender=function(t,e,i){return x.labels.onBeforeRender(t,e,i)},x.x=new s(o({},a,{orientation:new e.Vector2(1,0),spacing:new e.Vector2(1,-1)})),x.y=new s(o({},f,{orientation:new e.Vector2(0,1),spacing:new e.Vector2(-1,1)})),x.graduations=x.geometry,x.labels=new l(h),x.opacity=y,x.color.set(g),x.add(x.labels),m&&x.autoRenderCSS3D(!0===m?x:m),x.generate(),x}return r(n,t),Object.defineProperty(n.prototype,"visible",{get:function(){return this.labels.visible},set:function(t){this.labels&&(this.labels.visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this.material.color},set:function(t){this.material.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"opacity",{get:function(){return this.material.opacity},set:function(t){this.material.transparent=1!==t,this.material.opacity=t},enumerable:!0,configurable:!0}),n.prototype.generate=function(t,e){var i=void 0===e?{}:e,n=i.x,r=void 0===n?{}:n,o=i.y,s=void 0===o?{}:o;t&&(this.x.generate(t.map(function(t){return t.x}),r),this.y.generate(t.map(function(t){return t.y}),s)),this.generateGraduations(),this.generateLabels()},n.prototype.resize=function(){this.resizeGraduations(),this.resizeLabels()},n.prototype.generateGraduations=function(){this.graduations.generate(this.x,this.y)},n.prototype.resizeGraduations=function(){this.graduations.resize(this.x,this.y)},n.prototype.generateLabels=function(){this.labels.generate(this.x,this.y)},n.prototype.resizeLabels=function(){this.labels.resize(this.x,this.y)},n.prototype.autoRenderCSS3D=function(t){var n=new i.CSS3DRenderer,r=new e.Vector2;n.domElement.style.position="absolute",n.domElement.style.pointerEvents="none",n.domElement.style.top=n.domElement.style.left="0",n.domElement.style.zIndex="2",t.onAfterRender=function(t,e,i){t.getSize(r),n.setSize(r.x,r.y),n.render(e,i)},document.body.appendChild(n.domElement)},n.prototype.interpolateValue=function(t,e,i,n){return(t-e)/(i-e)*(this.graduations.container.max[n]-this.graduations.container.min[n])+this.graduations.container.min[n]},n.prototype.interpolate=function(t,i){var n=this;for(void 0===i&&(i=[]),i.length>t.length&&i.splice(t.length);i.length<t.length;)i.push(new e.Vector2);var r=1/0,o=1/0,s=-1/0,a=-1/0;return t.forEach(function(t){var e=t.x,i=t.y;e<r&&(r=e),e>s&&(s=e),i<o&&(o=i),i>a&&(a=i)}),t.forEach(function(t,e){var c=t.x,l=t.y;return i[e].set(n.interpolateValue(c,r,s,"x"),n.interpolateValue(l,o,a,"y"))}),i},n}(e.Mesh);t.Axes=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
