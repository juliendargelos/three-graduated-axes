!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three"),require("three/examples/jsm/renderers/CSS3DRenderer")):"function"==typeof define&&define.amd?define(["exports","three","three/examples/jsm/renderers/CSS3DRenderer"],e):e((t=t||self).THREEGraduatedAxes={},t.THREE,t.THREE)}(this,(function(t,e,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function r(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var o=function(){return(o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e){if(void 0===e&&(e=0),void 0===e)return t;var i=Math.pow(10,e);return t>0?Math.floor(t*i)/i:Math.ceil(t*i)/i}function a(t,e){return void 0===e&&(e=0),-s(-t,e)}function l(t,e,i,n){void 0===n&&(n=1);var r,o=1/Math.pow(i,e);if(n>0)for(r=Math.floor(t);r<t;)r+=o;else for(r=Math.ceil(t);r>t;)r-=o;return r}function u(t,e){void 0===e&&(e=10);for(var i=2;i<e;i++)if(!(t%i))return i;return 0}var c=function(){function t(t){var e=t.orientation,i=t.spacing,n=t.size,r=void 0===n?10:n,o=t.labels,s=void 0===o?[]:o,a=t.prefix,l=void 0===a?"":a,u=t.suffix,c=void 0===u?"":u,h=t.decimals,f=void 0===h?void 0:h,p=t.graduations,d=void 0===p?1:p,y=t.root,m=void 0!==y&&y,v=t.relative,g=void 0!==v&&v,b=t.lineWidth,x=void 0===b?.02:b,z=t.progress,M=void 0===z?1:z,O=t.margin,P=void 0===O?.2:O,w=t.padding,S=void 0===w?0:w,j=t.distance,_=void 0===j?0:j;this.minimumOffset=0,this.maximumOffset=0,this.orientation=e,this.spacing=i,this.size=r,this._labels=s,this.prefix=l,this.suffix=c,this.decimals=f,this.graduations=d,this.root=m,this.relative=g,this.lineWidth=x,this.progress=M,this.margin=P,this.padding=S,this.distance=_}return t.prototype.updateRootPosition=function(){if(this.relative)if(this.labels.length){var t=this.labels.findIndex((function(t){return 0===parseFloat(t)}));this.rootPosition=-1===t?0:t/(this.labels.length-1)}else this.rootPosition=.5;else this.rootPosition=0},Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relative",{get:function(){return this._relative},set:function(t){this._relative=t,this.updateRootPosition()},enumerable:!0,configurable:!0}),t.prototype.generate=function(t,e){var i=void 0===e?{}:e,n=i.labels,r=void 0===n?4:n,o=i.decimals,c=void 0===o?2:o,h=i.labelsBasedDecimals,f=void 0===h||h,p=i.root,d=void 0!==p&&p,y=i.relative,m=void 0===y||y,v=i.minimumOffset,g=void 0===v?0:v,b=i.maximumOffset,x=void 0===b?0:b;this.reset();var z=Math.min.apply(Math,t),M=Math.max.apply(Math,t),O=z-g,P=M-x;if(m&&(this.relative=O<0&&P>0),this.relative?(O=Math.min(O,-P),P=Math.max(-O,P),r%2||r++):d&&(O=Math.min(0,O),P=Math.max(0,P)),void 0!==c)if(f){var w=0;if(this.relative)w=2;else for(;!w;r++)w=u(r);O=l(O,c,w,-1),P=l(P,c,w,1)}else O=s(O,c),P=a(P,c);var S=P-O;this.labels=[];for(var j=0;j<r;j++)this.labels.push(a(j/(r-1)*S+O,c));this.minimumOffset=-(O-z)/S,this.maximumOffset=(P-M)/S},t.prototype.reset=function(){this.minimumOffset=this.maximumOffset=0,this.labels.splice(0),this.root=!1,this.relative=!1},t}(),h=function(t){function e(){var e=t.call(this,document.createElement("div"))||this;return e.wrapper=document.createElement("div"),e.content=document.createElement("div"),e.wrapper.appendChild(e.content),e.element.appendChild(e.wrapper),e}return r(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this.wrapper.style},enumerable:!0,configurable:!0}),e.prototype.generate=function(t,e){var i=void 0!==t.decimals&&Math.pow(10,t.decimals);this.content.textContent=""+t.prefix+(i?Math.round(e*i)/i:e)+t.suffix},e.prototype.resize=function(t,e,i,n){void 0===n&&(n=10);var r=!!e.rootPosition,o=(e.rootPosition-.5)*e.size;i=(i/(t.labels.length-1)-.5)*t.size;var s=t.spacing.x*(r||!t.orientation.x),a=t.spacing.y*(r||!t.orientation.y);this.content.style.transform="translate("+50*s+"%, "+-50*a+"%)",this.position.setX(n*(t.orientation.x*i+t.orientation.y*o+t.margin*s-t.padding*t.orientation.y*(1-r))).setY(n*(t.orientation.y*i+t.orientation.x*o+t.margin*a-t.padding*t.orientation.x*(1-r))).setZ(t.distance*n)},e}(i.CSS3DObject),f=function(t){function n(n){var r=void 0===n?{}:n,o=r.opacity,s=void 0===o?1:o,a=r.color,l=void 0===a?"#ffffff":a,u=r.fontSize,c=void 0===u?.3:u,h=r.fontFamily,f=void 0===h?"sans-serif":h,p=r.faceCamera,d=void 0!==p&&p,y=r.renderingScale,m=void 0===y?100:y,v=t.call(this)||this;return v.css3DRenderer=new i.CSS3DRenderer,v.originalMatrix=new e.Matrix4,v.style=v.css3DRenderer.domElement.style,v.opacity=s,v.color=l,v.fontSize=c,v.fontFamily=f,v.faceCamera=d,v.renderingScale=m,v.matrixAutoUpdate=!1,v.style.position="absolute",v.style.pointerEvents="none",v.style.top=v.style.left="0",v.style.zIndex="2",document.body.appendChild(v.css3DRenderer.domElement),v}return r(n,t),n.prototype.iterate=function(t,e,i){return[t,e].reduce((function(t,e,n,r){return e.labels.reduce((function(t,o,s){return i(e,r[(n+1)%r.length],t,s,o),t+1}),t)}),0)},n.prototype.scaleFont=function(){this.style.fontSize=this.fontSize*this.renderingScale+"px"},Object.defineProperty(n.prototype,"opacity",{get:function(){return parseFloat(this.style.opacity)},set:function(t){this.style.opacity=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this.style.color},set:function(t){this.style.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this.style.fontFamily},set:function(t){this.style.fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"faceCamera",{get:function(){return this._faceCamera},set:function(t){this._faceCamera=t,t||this.children.forEach((function(t){return t.rotation.set(0,0,0)}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return!this.style||"none"!==this.style.display},set:function(t){this.style&&(this.style.visibility=t?null:"none")},enumerable:!0,configurable:!0}),n.prototype.setRendererSize=function(t,e){this.css3DRenderer.setSize(t,e)},n.prototype.render=function(t){var e=this.parent,i=t.position.x,n=t.position.y,r=t.position.z;this.originalMatrix.copy(this.matrix),this.parent=null,t.position.multiplyScalar(this.renderingScale),this.updateWorldMatrix(!0,!1),e.updateWorldMatrix(!0,!1),this.applyMatrix(e.matrixWorld),this.updateWorldMatrix(!1,!1),this.faceCamera&&this.children.forEach((function(e){e.lookAt(t.position)})),this.position.multiplyScalar(this.renderingScale),this.updateMatrix(),this.updateMatrixWorld(!0),this.css3DRenderer.render(this,t),t.position.set(i,n,r),this.parent=e,this.matrix.copy(this.originalMatrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},n.prototype.generate=function(t,e){var i=this;this.scaleFont(),this.children.slice(this.iterate(t,e,(function(t,e,n,r,o){var s=i.children[n];s||i.add(s=new h),s.generate(t,o),s.resize(t,e,r,i.renderingScale)}))).forEach((function(t){return i.remove(t)}))},n.prototype.resize=function(t,e){var i=this;this.scaleFont(),this.iterate(t,e,(function(t,e,n,r){var o=i.children[n];o&&o.resize(t,e,r,i.renderingScale)}))},n}(e.Object3D),p=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.graduations=[],e}return r(i,t),i.prototype.generate=function(t,i){for(var n=this,r=6*[t,i].reduce((function(t,e,i){var r=e.graduations,o=e.root,s=e.rootPosition,a=e.labels,l=a.length-1;if(r)if(a.length)if(r<1){s*=l;for(var u=Math.min(l,Math.round(1/r));l%u||s%u;)u--;r=Math.ceil(a.length/u)}else r=Math.round(r)*l+1;else r=Math.round(r);else r=0+o;return n.graduations[i]=r,t+r}),0),o=new Uint16Array(r),s=0,a=0;a<r;a+=6)o[a]=o[a+3]=s,o[a+1]=o[a+5]=s+2,o[a+2]=s+1,o[a+4]=s+3,s+=4;this.setIndex(new e.BufferAttribute(o,1)),this.setAttribute("position",new e.BufferAttribute(new Float32Array(2*r),3)),this.resize(t,i)},i.prototype.resize=function(t,e){for(var i=this.getAttribute("position"),n=i.array,r=this.graduations[0],o=this.graduations[1],s=t.size/2,a=e.size/2,l=t.size/Math.max(1,r-1),u=e.size/Math.max(1,o-1),c=s+e.padding,h=a+t.padding,f=t.lineWidth/2,p=e.lineWidth/2,d=c+f,y=h+p,m=1===r?t.rootPosition*t.size:0,v=1===o?e.rootPosition*e.size:0,g=2*t.progress,b=2*e.progress,x=0,z=0;z<r;z++){var M=z*l-s+m;n[x]=n[x+9]=M-f,n[x+3]=n[x+6]=M+f,n[x+7]=n[x+10]=-y,n[x+1]=n[x+4]=y*g-y,x+=12}for(z=0;z<o;z++){M=z*u-a+v;n[x+7]=n[x+10]=M-p,n[x+1]=n[x+4]=M+p,n[x]=n[x+9]=-d,n[x+3]=n[x+6]=d*b-d,x+=12}i.needsUpdate=!0},i}(e.BufferGeometry),d=function(t){function i(i){var n=t.call(this)||this;if(n._size=new e.Vector2,i){var r=i.map((function(t,e){var n=t.x,r=t.y,o={x:parseFloat(n),y:parseFloat(r)};return isNaN(o.x)&&(o.x=e/(i.length-1)),isNaN(o.y)&&(o.y=e/(i.length-1)),o}));n.setFromPoints(r)}return n}return r(i,t),Object.defineProperty(i.prototype,"size",{get:function(){return this.getSize(this._size)},enumerable:!0,configurable:!0}),i.prototype.normalizePoint=function(t,i){return void 0===i&&(i=new e.Vector2),i.subVectors(t,this.min).divide(this.size)},i.prototype.interpolatePoint=function(t,i,n){return void 0===n&&(n=new e.Vector2),(i?i.normalizePoint(t,n):n).multiply(this.size).add(this.min)},i.prototype.interpolatePoints=function(t,n){var r=this;void 0===n&&(n=t.map((function(){return new e.Vector2})));var o=new i(t);return t.some((function(e,i){if(i>=n.length)return!0;var s={x:parseFloat(e.x),y:parseFloat(e.y)};isNaN(s.x)&&(s.x=i/(t.length-1)),isNaN(s.y)&&(s.y=i/(t.length-1)),r.interpolatePoint(s,o,n[i])})),n},i.prototype.resize=function(t,e){var i=t.size/2,n=e.size/2;this.min.set(t.minimumOffset*t.size-i,e.minimumOffset*e.size-n),this.max.set(i-t.maximumOffset*t.size,n-e.maximumOffset*e.size)},i}(e.Box2),y=function(t){function i(i){var n=void 0===i?{}:i,r=n.x,s=void 0===r?{}:r,a=n.y,l=void 0===a?{}:a,u=n.labels,h=void 0===u?{}:u,y=n.opacity,m=void 0===y?1:y,v=n.color,g=void 0===v?16777215:v,b=n.generate,x=void 0===b||b,z=t.call(this,new p)||this;return z.container=new d,z.x=new c(o({},s,{orientation:new e.Vector2(1,0),spacing:new e.Vector2(1,-1)})),z.y=new c(o({},l,{orientation:new e.Vector2(0,1),spacing:new e.Vector2(-1,1)})),z.graduations=z.geometry,z.labels=new f(h),z.opacity=m,z.color.set(g),z.add(z.labels),x&&z.generate(),z}return r(i,t),Object.defineProperty(i.prototype,"visible",{get:function(){return this.labels.visible},set:function(t){this.labels&&(this.labels.visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.material.color},set:function(t){this.material.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opacity",{get:function(){return this.material.opacity},set:function(t){this.material.transparent=1!==t,this.material.opacity=t},enumerable:!0,configurable:!0}),i.prototype.generate=function(t,e){var i=void 0===e?{}:e,n=i.x,r=void 0===n?{}:n,o=i.y,s=void 0===o?{}:o;if(t){var a=t.map((function(t){return t.x})),l=t.map((function(t){return t.y})),u=a.map(parseFloat),c=l.map(parseFloat);u.includes(NaN)?this.x.labels=a:this.x.generate(u,r),c.includes(NaN)?this.y.labels=l:this.y.generate(c,s)}this.generateGraduations(),this.generateLabels()},i.prototype.resize=function(){this.resizeGraduations(),this.resizeLabels()},i.prototype.generateGraduations=function(){this.graduations.generate(this.x,this.y),this.container.resize(this.x,this.y)},i.prototype.resizeGraduations=function(){this.graduations.resize(this.x,this.y),this.container.resize(this.x,this.y)},i.prototype.generateLabels=function(){this.labels.generate(this.x,this.y)},i.prototype.resizeLabels=function(){this.labels.resize(this.x,this.y)},i}(e.Mesh);t.Axes=y,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
