!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("three/examples/jsm/renderers/CSS3DRenderer")):"function"==typeof define&&define.amd?define(["exports","three","three/examples/jsm/renderers/CSS3DRenderer"],t):t((e=e||self).THREEGraduatedAxes={},e.THREE,e.THREE)}(this,function(e,t,i){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function r(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=function(){function e(e){var t=e.orientation,i=e.spacing,n=e.size,r=void 0===n?10:n,o=e.labels,s=void 0===o?[]:o,a=e.prefix,c=void 0===a?"":a,l=e.suffix,u=void 0===l?"":l,f=e.decimals,p=void 0===f?void 0:f,d=e.graduations,h=void 0===d?1:d,y=e.root,v=void 0!==y&&y,g=e.relative,b=void 0!==g&&g,m=e.lineWidth,x=void 0===m?.02:m,S=e.progress,z=void 0===S?1:S,w=e.margin,O=void 0===w?.2:w,P=e.padding,E=void 0===P?0:P;this.startOffset=0,this.endOffset=0,this.orientation=t,this.spacing=i,this.size=r,this._labels=s,this.prefix=c,this.suffix=u,this.decimals=p,this.graduations=h,this.root=v,this.relative=b,this.lineWidth=x,this.progress=z,this.margin=O,this.padding=E}return e.prototype.isPrime=function(e){for(var t=2,i=Math.sqrt(e);t<=i;t++)if(e%t==0)return!1;return e>1},e.prototype.updateRootPosition=function(){if(this.relative)if(this.labels.length){var e=this.labels.findIndex(function(e){return 0===parseFloat(e)});this.rootPosition=-1===e?0:e/(this.labels.length-1)}else this.rootPosition=.5;else this.rootPosition=0},Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},set:function(e){this._labels=e,this.updateRootPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relative",{get:function(){return this._relative},set:function(e){this._relative=e,this.updateRootPosition()},enumerable:!0,configurable:!0}),e.prototype.generate=function(e,t){var i=void 0===t?{}:t,n=i.targetDensity,r=void 0===n?4:n,o=i.minimumDelta,s=void 0===o?1:o,a=i.rounding,c=void 0===a?2:a,l=i.avoidPrime,u=void 0===l||l,f=i.includeZero,p=void 0!==f&&f,d=i.autoRelative,h=void 0===d||d;i.symmetric;this.reset();var y,v=e[0],g=1/0,b=-1/0,m=1/0,x=0,S=function(e){return e};e.forEach(function(e){e<g&&(g=e),e>b&&(b=e);var t=Math.abs(e-v);t&&t<m&&(m=t)}),h&&(this.relative=g<0&&b>0);var z=b-g;if(m=Math.max(s,m),(m*=z/m/r)>=z/2&&(m=z/2),c){var w=Math.pow(10,c);m=(S=function(e){return Math.round(e*w)/w})(m);var O=Math.floor(g*w)/w;x+=g-O,g=O,z+=x}var P=z/m+1,E=Math.ceil(P);if(u)for(;this.isPrime(E+1);)E++;if(b+=y=(E-P)*m||0,z+=y,p||h&&this.relative){for(var j=1/0,M=0;j&&M<E;M++){var R=g+M*m;Math.abs(R)<Math.abs(j)&&(j=R)}j<0&&(j+=m),g-=j,x+=j,z+=j}var C=[];for(M=0;M<E;M++)C.push(S(g+M*m));this.startOffset=x/z,this.endOffset=y/z,this.labels=C},e.prototype.reset=function(){this.startOffset=this.endOffset=0,this.labels.splice(0),this.graduations=1,this.root=!1,this.relative=!1},e}(),a=function(){function e(){this.id=Date.now()+"-"+~~(1e3*Math.random())}return e.prototype.property=function(e){return"--"+e+"-"+this.id},e.prototype.get=function(e){return document.body.style.getPropertyValue(this.property(e))},e.prototype.set=function(e,t){return document.body.style.setProperty(this.property(e),t),this},e.prototype.bind=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];i.forEach(function(i){e.setProperty(i,"var("+t.property(i)+")")})},e}(),c=function(e){function t(){var t=e.call(this,document.createElement("div"))||this;return t.wrapper=document.createElement("div"),t.content=document.createElement("div"),t.wrapper.appendChild(t.content),t.element.appendChild(t.wrapper),t}return r(t,e),Object.defineProperty(t.prototype,"style",{get:function(){return this.wrapper.style},enumerable:!0,configurable:!0}),t.prototype.generate=function(e,t){var i=void 0!==e.decimals&&Math.pow(10,e.decimals);this.content.textContent=""+e.prefix+(i?Math.round(t*i)/i:t)+e.suffix},t.prototype.resize=function(e,t,i,n){void 0===n&&(n=10);var r=(t.rootPosition-.5)*t.size;i=(i/(e.labels.length-1)-.5)*e.size;var o=e.spacing.x*(t.relative||!e.orientation.x),s=e.spacing.y*(t.relative||!e.orientation.y);this.content.style.transform="translate("+50*o+"%, "+-50*s+"%)",this.position.setX(n*(e.orientation.x*i+e.orientation.y*r+e.margin*o-e.padding*e.orientation.y*!t.relative)).setY(n*(e.orientation.y*i+e.orientation.x*r+e.margin*s-e.padding*e.orientation.x*!t.relative))},t}(i.CSS3DObject),l=function(e){function t(t){var i=void 0===t?{}:t,n=i.opacity,r=void 0===n?1:n,o=i.color,s=void 0===o?"#aaaaaa":o,c=i.fontSize,l=void 0===c?.3:c,u=i.fontFamily,f=void 0===u?"sans-serif":u,p=i.faceCamera,d=void 0!==p&&p,h=i.renderingScale,y=void 0===h?100:h,v=e.call(this)||this;return v.cssStyle=(new a).set("white-space","nowrap"),v.onBeforeRender=function(e,t,i){i.position.multiplyScalar(v.renderingScale),v.faceCamera&&v.children.forEach(function(e){e.lookAt(i.position)})},v.onAfterRender=function(e,t,i){i.position.divideScalar(v.renderingScale)},v.opacity=r,v.color=s,v.fontSize=l,v.fontFamily=f,v.faceCamera=d,v.renderingScale=y,v}return r(t,e),t.prototype.iterate=function(e,t,i){return[e,t].reduce(function(e,t,n,r){return t.labels.reduce(function(e,o,s){return i(t,r[(n+1)%r.length],e,s,o),e+1},e)},0)},t.prototype.addLabel=function(){var e=new c;return this.cssStyle.bind(e.style,"opacity","color","visibility","white-space","transform","font-size","font-family"),this.add(e),e},t.prototype.scaleFont=function(){this.cssStyle.set("font-size",this.fontSize*this.renderingScale+"px")},Object.defineProperty(t.prototype,"opacity",{get:function(){return parseFloat(this.cssStyle.get("opacity"))},set:function(e){this.cssStyle.set("opacity",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.cssStyle.get("color")},set:function(e){this.cssStyle.set("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.cssStyle.get("font-family")},set:function(e){this.cssStyle.set("font-family",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"faceCamera",{get:function(){return this._faceCamera},set:function(e){this._faceCamera=e,e||this.children.forEach(function(e){return e.rotation.set(0,0,0)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.cssStyle&&"hidden"!==this.cssStyle.get("visibility")},set:function(e){this.cssStyle&&this.cssStyle.set("visibility",e?"visible":"hidden")},enumerable:!0,configurable:!0}),t.prototype.generate=function(e,t){var i=this;this.scaleFont(),this.children.slice(this.iterate(e,t,function(e,t,n,r,o){var s=i.children[n]||i.addLabel();s.generate(e,o),s.resize(e,t,r,i.renderingScale)})).forEach(function(e){return i.remove(e)})},t.prototype.resize=function(e,t){var i=this;this.scaleFont(),this.iterate(e,t,function(e,t,n,r){var o=i.children[n];o&&o.resize(e,t,r,i.renderingScale)})},t}(t.Object3D),u=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.graduations=[],i.container=new t.Box2(new t.Vector2,new t.Vector2),i}return r(i,e),i.prototype.generate=function(e,i){for(var n=this,r=6*[e,i].reduce(function(e,t,i){var r=t.graduations,o=t.root,s=t.rootPosition,a=t.labels,c=a.length-1;if(r)if(a.length)if(r<1){s*=c;for(var l=Math.min(c,Math.round(1/r));c%l||s%l;)l--;r=Math.ceil(a.length/l)}else r=Math.round(r)*c+1;else r=Math.round(r);else r=0+o;return n.graduations[i]=r,e+r},0),o=new Uint16Array(r),s=0,a=0;a<r;a+=6)o[a]=o[a+3]=s,o[a+1]=o[a+5]=s+2,o[a+2]=s+1,o[a+4]=s+3,s+=4;this.setIndex(new t.BufferAttribute(o,1)),this.setAttribute("position",new t.BufferAttribute(new Float32Array(2*r),3)),this.resize(e,i)},i.prototype.resize=function(e,t){for(var i=this.getAttribute("position"),n=i.array,r=this.graduations[0],o=this.graduations[1],s=e.size/2,a=t.size/2,c=e.size/Math.max(1,r-1),l=t.size/Math.max(1,o-1),u=s+t.padding,f=a+e.padding,p=e.lineWidth/2,d=t.lineWidth/2,h=1===r?e.rootPosition*e.size:0,y=1===o?t.rootPosition*t.size:0,v=2*e.progress,g=2*t.progress,b=0,m=0;m<r;m++){var x=m*c-s+h;n[b]=n[b+9]=x-p,n[b+3]=n[b+6]=x+p,n[b+7]=n[b+10]=-f,n[b+1]=n[b+4]=f*v-f,b+=12}for(m=0;m<o;m++){x=m*l-a+y;n[b+7]=n[b+10]=x-d,n[b+1]=n[b+4]=x+d,n[b]=n[b+9]=-u,n[b+3]=n[b+6]=u*g-u,b+=12}i.needsUpdate=!0,this.container.min.set(e.startOffset*e.size-s,t.startOffset*t.size-a),this.container.max.set(s-e.endOffset*e.size,a-t.endOffset*t.size)},i}(t.BufferGeometry),f=function(e){function n(i){var n=void 0===i?{}:i,r=n.x,a=void 0===r?{}:r,c=n.y,f=void 0===c?{}:c,p=n.labels,d=void 0===p?{}:p,h=n.opacity,y=void 0===h?1:h,v=n.color,g=void 0===v?11184810:v,b=n.autoRenderCSS3D,m=void 0===b||b,x=e.call(this,new u)||this;return x.onBeforeRender=function(e,t,i){return x.labels.onBeforeRender(e,t,i)},x.onAfterRender=function(e,t,i){return x.labels.onAfterRender(e,t,i)},x.x=new s(o({},a,{orientation:new t.Vector2(1,0),spacing:new t.Vector2(1,-1)})),x.y=new s(o({},f,{orientation:new t.Vector2(0,1),spacing:new t.Vector2(-1,1)})),x.graduations=x.geometry,x.labels=new l(d),x.opacity=y,x.color.set(g),x.add(x.labels),m&&x.autoRenderCSS3D(!0===m?x:m),x.generate(),x}return r(n,e),Object.defineProperty(n.prototype,"visible",{get:function(){return this.labels.visible},set:function(e){this.labels&&(this.labels.visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this.material.color},set:function(e){this.material.color=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"opacity",{get:function(){return this.material.opacity},set:function(e){this.material.transparent=1!==e,this.material.opacity=e},enumerable:!0,configurable:!0}),n.prototype.generate=function(e,t){var i=void 0===t?{}:t,n=i.x,r=void 0===n?{}:n,o=i.y,s=void 0===o?{}:o;e&&(this.x.generate(e.map(function(e){return e.x}),r),this.y.generate(e.map(function(e){return e.y}),s)),this.generateGraduations(),this.generateLabels()},n.prototype.resize=function(){this.resizeGraduations(),this.resizeLabels()},n.prototype.generateGraduations=function(){this.graduations.generate(this.x,this.y)},n.prototype.resizeGraduations=function(){this.graduations.resize(this.x,this.y)},n.prototype.generateLabels=function(){this.labels.generate(this.x,this.y)},n.prototype.resizeLabels=function(){this.labels.resize(this.x,this.y)},n.prototype.autoRenderCSS3D=function(e){var n=this.onAfterRender,r=new i.CSS3DRenderer,o=new t.Vector2;r.domElement.style.position="absolute",r.domElement.style.pointerEvents="none",r.domElement.style.top=r.domElement.style.left="0",r.domElement.style.zIndex="2",e.onAfterRender=function(e,t,i){e.getSize(o),r.setSize(o.x,o.y),r.render(t,i),n(e,t,i)},document.body.appendChild(r.domElement)},n.prototype.interpolateValue=function(e,t,i,n){return(e-t)/(i-t)*(this.graduations.container.max[n]-this.graduations.container.min[n])+this.graduations.container.min[n]},n.prototype.interpolate=function(e,i){var n=this;for(void 0===i&&(i=[]),i.length>e.length&&i.splice(e.length);i.length<e.length;)i.push(new t.Vector2);var r=1/0,o=1/0,s=-1/0,a=-1/0;return e.forEach(function(e){var t=e.x,i=e.y;t<r&&(r=t),t>s&&(s=t),i<o&&(o=i),i>a&&(a=i)}),e.forEach(function(e,t){var c=e.x,l=e.y;return i[t].set(n.interpolateValue(c,r,s,"x"),n.interpolateValue(l,o,a,"y"))}),i},n}(t.Mesh);e.Axes=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
